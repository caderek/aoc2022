"use strict";(()=>{var Re=Object.create;var se=Object.defineProperty;var Ye=Object.getOwnPropertyDescriptor;var De=Object.getOwnPropertyNames;var Be=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ge=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of De(e))!$e.call(t,a)&&a!==r&&se(t,a,{get:()=>e[a],enumerable:!(i=Ye(e,a))||i.enumerable});return t};var le=(t,e,r)=>(r=t!=null?Re(Be(t)):{},Ge(e||!t||!t.__esModule?se(r,"default",{value:t,enumerable:!0}):r,t));var ce=M((Lt,de)=>{de.exports=function(e){Je(e);var r=We(e);return e.on=r.on,e.off=r.off,e.fire=r.fire,e};function We(t){var e=Object.create(null);return{on:function(r,i,a){if(typeof i!="function")throw new Error("callback is expected to be a function");var n=e[r];return n||(n=e[r]=[]),n.push({callback:i,ctx:a}),t},off:function(r,i){var a=typeof r>"u";if(a)return e=Object.create(null),t;if(e[r]){var n=typeof i!="function";if(n)delete e[r];else for(var o=e[r],s=0;s<o.length;++s)o[s].callback===i&&o.splice(s,1)}return t},fire:function(r){var i=e[r];if(!i)return t;var a;arguments.length>1&&(a=Array.prototype.splice.call(arguments,1));for(var n=0;n<i.length;++n){var o=i[n];o.callback.apply(o.ctx,a)}return t}}}function Je(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(t.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}});var pe=M((Ot,ve)=>{ve.exports=Qe;var Ke=ce();function Qe(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,r=new Map,i={},a=0,n=t.multigraph?_:L,o=[],s=w,u=w,c=w,h=w,I={version:20,addNode:T,addLink:S,removeLink:G,removeNode:F,getNode:g,getNodeCount:k,getLinkCount:x,getEdgeCount:x,getLinksCount:x,getNodesCount:k,getLinks:N,forEachNode:H,forEachLinkedNode:b,forEachLink:y,beginUpdate:c,endUpdate:h,clear:Y,hasLink:R,hasNode:g,getLink:R};return Ke(I),z(),I;function z(){var l=I.on;I.on=d;function d(){return I.beginUpdate=c=v,I.endUpdate=h=A,s=P,u=m,I.on=l,l.apply(I,arguments)}}function P(l,d){o.push({link:l,changeType:d})}function m(l,d){o.push({node:l,changeType:d})}function T(l,d){if(l===void 0)throw new Error("Invalid node identifier");c();var p=g(l);return p?(p.data=d,u(p,"update")):(p=new Xe(l,d),u(p,"add")),e.set(l,p),h(),p}function g(l){return e.get(l)}function F(l){var d=g(l);if(!d)return!1;c();var p=d.links;return p&&(p.forEach($),d.links=null),e.delete(l),u(d,"remove"),h(),!0}function S(l,d,p){c();var C=g(l)||T(l),q=g(d)||T(d),E=n(l,d,p),V=r.has(E.id);return r.set(E.id,E),he(C,E),l!==d&&he(q,E),s(E,V?"update":"add"),h(),E}function L(l,d,p){var C=K(l,d),q=r.get(C);return q?(q.data=p,q):new fe(l,d,p,C)}function _(l,d,p){var C=K(l,d),q=i.hasOwnProperty(C);if(q||R(l,d)){q||(i[C]=0);var E="@"+ ++i[C];C=K(l+E,d+E)}return new fe(l,d,p,C)}function k(){return e.size}function x(){return r.size}function N(l){var d=g(l);return d?d.links:null}function G(l,d){return d!==void 0&&(l=R(l,d)),$(l)}function $(l){if(!l||!r.get(l.id))return!1;c(),r.delete(l.id);var d=g(l.fromId),p=g(l.toId);return d&&d.links.delete(l),p&&p.links.delete(l),s(l,"remove"),h(),!0}function R(l,d){if(!(l===void 0||d===void 0))return r.get(K(l,d))}function Y(){c(),H(function(l){F(l.id)}),h()}function y(l){if(typeof l=="function")for(var d=r.values(),p=d.next();!p.done;){if(l(p.value))return!0;p=d.next()}}function b(l,d,p){var C=g(l);if(C&&C.links&&typeof d=="function")return p?f(C.links,l,d):O(C.links,l,d)}function O(l,d,p){for(var C,q=l.values(),E=q.next();!E.done;){var V=E.value,Ve=V.fromId===d?V.toId:V.fromId;if(C=p(e.get(Ve),V),C)return!0;E=q.next()}}function f(l,d,p){for(var C,q=l.values(),E=q.next();!E.done;){var V=E.value;if(V.fromId===d&&(C=p(e.get(V.toId),V),C))return!0;E=q.next()}}function w(){}function v(){a+=1}function A(){a-=1,a===0&&o.length>0&&(I.fire("changed",o),o.length=0)}function H(l){if(typeof l!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+l);for(var d=e.values(),p=d.next();!p.done;){if(l(p.value))return!0;p=d.next()}}}function Xe(t,e){this.id=t,this.links=null,this.data=e}function he(t,e){t.links?t.links.add(e):t.links=new Set([e])}function fe(t,e,r,i){this.fromId=t,this.toId=e,this.data=r,this.id=i}function K(t,e){return t.toString()+"\u{1F449} "+e.toString()}});var X=M((qt,ge)=>{ge.exports=Q;function Q(t,e){if(!(this instanceof Q))return new Q(t,e);if(Array.isArray(t)||(e=t,t=[]),e=e||{},this.data=t||[],this.length=this.data.length,this.compare=e.compare||je,this.setNodeId=e.setNodeId||Ze,this.length>0)for(var r=this.length>>1;r>=0;r--)this._down(r);if(e.setNodeId)for(var r=0;r<this.length;++r)this.setNodeId(this.data[r],r)}function Ze(){}function je(t,e){return t-e}Q.prototype={push:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},updateItem:function(t){this._down(t),this._up(t)},_up:function(t){for(var e=this.data,r=this.compare,i=this.setNodeId,a=e[t];t>0;){var n=t-1>>1,o=e[n];if(r(a,o)>=0)break;e[t]=o,i(o,t),t=n}e[t]=a,i(a,t)},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,a=e[t],n=this.setNodeId;t<i;){var o=(t<<1)+1,s=o+1,u=e[o];if(s<this.length&&r(e[s],u)<0&&(o=s,u=e[s]),r(u,a)>=0)break;e[t]=u,n(u,t),t=o}e[t]=a,n(a,t)}}});var ie=M((zt,Se)=>{function et(t){this.node=t,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}function tt(){var t=0,e=[];return{createNewState:i,reset:r};function r(){t=0}function i(a){var n=e[t];return n?(n.node=a,n.parent=null,n.closed=!1,n.open=0,n.distanceToSource=Number.POSITIVE_INFINITY,n.fScore=Number.POSITIVE_INFINITY,n.heapIndex=-1):(n=new et(a),e[t]=n),t++,n}}Se.exports=tt});var Z=M((_t,Ne)=>{Ne.exports={l2:rt,l1:nt};function rt(t,e){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function nt(t,e){var r=t.x-e.x,i=t.y-e.y;return Math.abs(r)+Math.abs(i)}});var j=M((At,we)=>{var me=[];typeof Object.freeze=="function"&&Object.freeze(me);we.exports={heuristic:it,distance:at,compareFScore:ot,NO_PATH:me,setHeapIndex:st,setH1:dt,setH2:ct,compareF1Score:lt,compareF2Score:ut};function it(){return 0}function at(){return 1}function ot(t,e){var r=t.fScore-e.fScore;return r}function st(t,e){t.heapIndex=e}function lt(t,e){return t.f1-e.f1}function ut(t,e){return t.f2-e.f2}function dt(t,e){t.h1=e}function ct(t,e){t.h2=e}});var Ce=M((Ht,ee)=>{ee.exports=pt;var ht=X(),ft=ie(),Ie=Z(),U=j(),vt=U.NO_PATH;ee.exports.l2=Ie.l2;ee.exports.l1=Ie.l1;function pt(t,e){e=e||{};var r=e.oriented,i=e.heuristic;i||(i=U.heuristic);var a=e.distance;a||(a=U.distance);var n=ft();return{find:o};function o(s,u){var c=t.getNode(s);if(!c)throw new Error("fromId is not defined in this graph: "+s);var h=t.getNode(u);if(!h)throw new Error("toId is not defined in this graph: "+u);n.reset();var I=new Map,z=new ht({compare:U.compareFScore,setNodeId:U.setHeapIndex}),P=n.createNewState(c);I.set(s,P),P.fScore=i(c,h),P.distanceToSource=0,z.push(P),P.open=1;for(var m;z.length>0;){if(m=z.pop(),gt(m,h))return St(m);m.closed=!0,t.forEachLinkedNode(m.node.id,T,r)}return vt;function T(g,F){var S=I.get(g.id);if(S||(S=n.createNewState(g),I.set(g.id,S)),!S.closed){S.open===0&&(z.push(S),S.open=1);var L=m.distanceToSource+a(g,m.node,F);L>=S.distanceToSource||(S.parent=m,S.distanceToSource=L,S.fScore=L+i(S.node,h),z.updateItem(S.heapIndex))}}}}function gt(t,e){return t.node===e}function St(t){for(var e=[t.node],r=t.parent;r;)e.push(r.node),r=r.parent;return e}});var ye=M((Mt,te)=>{te.exports=wt;var Te=X(),Nt=ie(),Ee=Z(),D=j(),W=1,ae=2,mt=D.NO_PATH;te.exports.l2=Ee.l2;te.exports.l1=Ee.l1;function wt(t,e){e=e||{};var r=e.oriented,i=e.heuristic;i||(i=D.heuristic);var a=e.distance;a||(a=D.distance);var n=Nt();return{find:o};function o(s,u){var c=t.getNode(s);if(!c)throw new Error("fromId is not defined in this graph: "+s);var h=t.getNode(u);if(!h)throw new Error("toId is not defined in this graph: "+u);if(c===h)return[c];n.reset();var I=r?G:N,z=new Map,P=new Te({compare:D.compareFScore,setNodeId:D.setHeapIndex}),m=new Te({compare:D.compareFScore,setNodeId:D.setHeapIndex}),T=n.createNewState(c);z.set(s,T),T.fScore=i(c,h),T.distanceToSource=0,P.push(T),T.open=W;var g=n.createNewState(h);g.fScore=i(h,c),g.distanceToSource=0,m.push(g),g.open=ae;for(var F=Number.POSITIVE_INFINITY,S,L,_=P,k=W;P.length>0&&m.length>0;){P.length<m.length?(k=W,_=P):(k=ae,_=m);var x=_.pop();if(x.closed=!0,!(x.distanceToSource>F)&&(t.forEachLinkedNode(x.node.id,I),S&&L))return R(S,L)}return mt;function N(y,b){return Y(y,b,x)}function G(y,b){if(k===W){if(b.fromId===x.node.id)return Y(y,b,x)}else if(k===ae&&b.toId===x.node.id)return Y(y,b,x)}function $(y){var b=y.open;return!!(b&&b!==k)}function R(y,b){for(var O=[],f=y;f;)O.push(f.node),f=f.parent;for(var w=b;w;)O.unshift(w.node),w=w.parent;return O}function Y(y,b,O){var f=z.get(y.id);if(f||(f=n.createNewState(y),z.set(y.id,f)),!f.closed){if($(f,O)){var w=f.distanceToSource+O.distanceToSource;w<F&&(S=f,L=O,F=w);return}var v=O.distanceToSource+a(f.node,O.node,b);if(!(v>=f.distanceToSource)){var A=k===W?h:c,H=v+i(f.node,A);H>=F||(f.fScore=H,f.open===0&&(_.push(f),_.updateItem(f.heapIndex),f.open=k),f.parent=O,f.distanceToSource=v)}}}}}});var xe=M((Vt,be)=>{be.exports=Ct;function It(t){this.node=t,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}function Ct(){var t=0,e=[];return{createNewState:i,reset:r};function r(){t=0}function i(a){var n=e[t];return n?(n.node=a,n.p1=null,n.p2=null,n.closed=!1,n.g1=Number.POSITIVE_INFINITY,n.g2=Number.POSITIVE_INFINITY,n.f1=Number.POSITIVE_INFINITY,n.f2=Number.POSITIVE_INFINITY,n.h1=-1,n.h2=-1):(n=new It(a),e[t]=n),t++,n}}});var Fe=M((Rt,re)=>{re.exports=yt;var Pe=X(),ke=Z(),B=j(),Tt=xe(),Et=B.NO_PATH;re.exports.l2=ke.l2;re.exports.l1=ke.l1;function yt(t,e){e=e||{};var r=e.oriented,i=e.quitFast,a=e.heuristic;a||(a=B.heuristic);var n=e.distance;n||(n=B.distance);var o=Tt();return{find:s};function s(u,c){var h=t.getNode(u);if(!h)throw new Error("fromId is not defined in this graph: "+u);var I=t.getNode(c);if(!I)throw new Error("toId is not defined in this graph: "+c);o.reset();var z=r?O:Y,P=r?b:y,m=new Map,T=new Pe({compare:B.compareF1Score,setNodeId:B.setH1}),g=new Pe({compare:B.compareF2Score,setNodeId:B.setH2}),F,S=Number.POSITIVE_INFINITY,L=o.createNewState(h);m.set(u,L),L.g1=0;var _=a(h,I);L.f1=_,T.push(L);var k=o.createNewState(I);m.set(c,k),k.g2=0;var x=_;k.f2=x,g.push(k);for(var N;g.length&&T.length&&(T.length<g.length?$():R(),!(i&&F)););var G=bt(F);return G;function $(){N=T.pop(),!N.closed&&(N.closed=!0,N.f1<S&&N.g1+x-a(h,N.node)<S&&t.forEachLinkedNode(N.node.id,z),T.length>0&&(_=T.peek().f1))}function R(){N=g.pop(),!N.closed&&(N.closed=!0,N.f2<S&&N.g2+_-a(N.node,I)<S&&t.forEachLinkedNode(N.node.id,P),g.length>0&&(x=g.peek().f2))}function Y(f,w){var v=m.get(f.id);if(v||(v=o.createNewState(f),m.set(f.id,v)),!v.closed){var A=N.g1+n(N.node,f,w);A<v.g1&&(v.g1=A,v.f1=A+a(v.node,I),v.p1=N,v.h1<0?T.push(v):T.updateItem(v.h1));var H=v.g1+v.g2;H<S&&(S=H,F=v)}}function y(f,w){var v=m.get(f.id);if(v||(v=o.createNewState(f),m.set(f.id,v)),!v.closed){var A=N.g2+n(N.node,f,w);A<v.g2&&(v.g2=A,v.f2=A+a(h,v.node),v.p2=N,v.h2<0?g.push(v):g.updateItem(v.h2));var H=v.g1+v.g2;H<S&&(S=H,F=v)}}function b(f,w){if(w.toId===N.node.id)return y(f,w)}function O(f,w){if(w.fromId===N.node.id)return Y(f,w)}}}function bt(t){if(!t)return Et;for(var e=[t.node],r=t.p1;r;)e.push(r.node),r=r.p1;for(var i=t.p2;i;)e.unshift(i.node),i=i.p2;return e}});var Oe=M((Yt,Le)=>{Le.exports={aStar:Ce(),aGreedy:ye(),nba:Fe()}});var Ue={tileColor:"#eee",tileShape:"square",tileSize:8,lineColor:null,lineSize:0,gapSize:2,background:"#0e0614"},ne=class{#r;#t;#e=Ue;#i=()=>{let e=window.devicePixelRatio;this.#r.width=Math.floor(this.#r.clientWidth*e),this.#r.height=Math.floor(this.#r.clientHeight*e)};constructor(e,r={}){let i=document.querySelector(e);if(i===null)throw new Error("Provided selector does not exist.");this.#r=i,this.#t=this.#r.getContext("2d"),this.#a(r),this.#i(),this.#o(),this.#r.style.background=this.#e.background??"transparent"}#a(e={}){this.#e={...this.#e,...e}}#o(){window.addEventListener("resize",this.#i)}#s(e,r,i,a,n,o=1){let s=this.#e.tileSize,u=this.#e.gapSize,c=s*(1-o)/2;i&&(this.#t.fillStyle=i,this.#t.fillRect(e*(s+u)+c,r*(s+u)+c,s*o,s*o)),n>0&&a&&(this.#t.strokeStyle=a,this.#t.lineWidth=n,this.#t.strokeRect(e*(s+u)+c,r*(s+u)+c,s*o,s*o))}#l(e,r,i,a,n,o=1){let s=this.#e.tileSize,u=this.#e.gapSize,c=this.#e.tileSize*o,h=this.#e.tileSize*(1-o)/2+c/2;this.#t.beginPath(),this.#t.arc(e*(s+u)+h,r*(s+u)+h,c/2,0,Math.PI*2),i&&(this.#t.fillStyle=i,this.#t.fill()),n>0&&a&&(this.#t.strokeStyle=a,this.#t.lineWidth=n,this.#t.stroke())}#n(e){return e==="circle"?this.#l.bind(this):this.#s.bind(this)}fillArea(e,r,i){for(let a=0;a<e;a++)for(let n=0;n<r;n++){let o={tileColor:this.#e.tileColor,tileShape:this.#e.tileShape,lineColor:this.#e.lineColor,lineSize:this.#e.lineSize,scale:1,...i?i(!0,n,a):{}};this.#n(o.tileShape)(n,a,o.tileColor,o.lineColor,o.lineSize,o.scale)}}drawGrid(e,r){let i=e.length,a=e[0].length;for(let n=0;n<i;n++)for(let o=0;o<a;o++){let s=e[n][o];typeof s=="string"&&(s=s.trim());let u={tileColor:this.#e.tileColor,tileShape:this.#e.tileShape,lineColor:this.#e.lineColor,lineSize:this.#e.lineSize,scale:1,...r?r(s,o,n):{}};s&&this.#n(u.tileShape)(o,n,u.tileColor,u.lineColor,u.lineSize,u.scale)}}drawPoints(e,r){for(let i=0;i<e.length;i++){let a=e[i],n={tileColor:this.#e.tileColor,tileShape:this.#e.tileShape,lineColor:this.#e.lineColor,lineSize:this.#e.lineSize,scale:1,...r?r(a,i):{}};this.#n(n.tileShape)(a.x,a.y,n.tileColor,n.lineColor,n.lineSize,n.scale)}}clear(){this.#t.clearRect(0,0,this.#r.width,this.#r.height)}},ue=ne;var ze=le(pe(),1),oe=le(Oe(),1),_e=t=>t.split(`
`).map(e=>e.split("")),xt=(t,e,r)=>[r[e-1]?.[t]?{val:r[e-1][t],x:t,y:e-1}:void 0,r[e][t+1]?{val:r[e][t+1],x:t+1,y:e}:void 0,r[e+1]?.[t]?{val:r[e+1][t],x:t,y:e+1}:void 0,r[e][t-1]?{val:r[e][t-1],x:t-1,y:e}:void 0].filter(i=>i!==void 0),qe=t=>t==="S"?1:t==="E"?26:t.charCodeAt(0)-96,Ae=t=>{let e=(0,ze.default)(),r="",i="";for(let a=0;a<t.length;a++)for(let n=0;n<t[0].length;n++){let o=xt(n,a,t),s=qe(t[a][n]),u=`${a}:${n}`;t[a][n]==="S"&&(r=u),t[a][n]==="E"&&(i=u),e.addNode(u,{x:n,y:a,val:s});for(let c of o){let h=qe(c.val);h<=s+1&&(e.addNode(`${c.y}:${c.x}`,{x:c.x,y:c.y,val:h}),e.addLink(u,`${c.y}:${c.x}`))}}return{g:e,start:r,end:i}},He=t=>{let e=_e(t),{g:r,start:i,end:a}=Ae(e);return oe.default.nba(r,{oriented:!0}).find(i,a).map(o=>o.data).reverse()},Me=t=>{let e=_e(t),{g:r,end:i}=Ae(e),a=oe.default.nba(r,{oriented:!0}),n=1/0,o=[];return r.forEachNode(s=>{if(s.data.val===1){let u=a.find(s.id,i);u.length&&u.length-1<n&&(n=u.length-1,o=u)}}),o.map(s=>s.data)};var J=t=>new Promise(e=>setTimeout(e,t)),Pt=async()=>{let t=await fetch("/src/day12/input.txt").then(s=>s.text()),e=t.split(`
`).map(s=>s.split("")),r=He(t),i=Me(t),a=50,n=["#103D20","#224E27","#305E30","#376A36","#417738","#548542","#5E9045","#6A9F49","#7CAD4C","#96B857","#AAC160","#C4C963","#D7D265","#F3C964","#EFBA5D","#ECAA56","#E99C4F","#E58B48","#E17B40","#DE6C39","#DB5E33","#C74D2C","#B34127","#993121","#82221B","#640F14"],o=new ue("canvas",{gapSize:0,tileSize:12,background:"#011"});for(let s=0;s<r.length;s++)o.drawGrid(e,u=>{let c=u.charCodeAt(0)-97;return{tileColor:["S","E"].includes(u)?"#14051f":n[c],tileShape:"square",scale:1}}),s===0&&await J(1e3),o.drawPoints(r.slice(0,s+1),(u,c)=>{let h=Math.floor(360/r.length*c)-180;return{tileColor:`hsl(${h}, 80%, 70%)`,scale:.7,tileShape:"circle",lineColor:`hsl(${h}, 80%, 15%)`,lineSize:2}}),await J(a);await J(500);for(let s=0;s<i.length;s++)o.drawGrid(e,u=>{let c=u.charCodeAt(0)-97;return{tileColor:["S","E"].includes(u)?"#111":n[c],tileShape:"square",scale:1}}),o.drawPoints(r,(u,c)=>{let h=Math.floor(360/r.length*c)-180;return{tileColor:`hsla(${h}, 80%, 70%, 0.3)`,scale:.7,tileShape:"circle",lineColor:`hsla(${h}, 80%, 15%, 0.3)`,lineSize:2}}),s===0&&await J(500),o.drawPoints(i.slice(0,s+1),(u,c)=>{let h=Math.floor(360/r.length*c)-180;return{tileColor:`hsl(${h}, 80%, 70%)`,scale:.7,tileShape:"circle",lineColor:`hsl(${h}, 80%, 15%)`,lineSize:2}}),await J(a);o.drawPoints(i.slice(-1),()=>({tileColor:"crimson",tileShape:"circle",scale:.8,lineColor:"#14051f",lineSize:2}))};Pt();})();
